<main id="main">
    <h1 class="sr-only">Discounts at AMC Theatres | Amazing Movie Ticket Savings</h1>



    <section class="empty:hidden">
        <section class="relative h-[var(--mobile-height)] overflow-clip md:h-[var(--desktop-height)]"
            style="--desktop-height: 450px; --mobile-height: 410px;">
            <div class="relative flex h-[var(--mobile-height,410px)] items-end md:h-[var(--desktop-height,450px)]">
                <img alt="" config="[object Object]" loading="lazy" decoding="async" data-nimg="fill"
                    class="hidden md:block absolute inset-0 z-0 w-full object-cover pointer-events-none object-right"
                    sizes="100vw"
                    src="https://amc-theatres-res.cloudinary.com/image/upload/c_limit,w_3840/f_auto/q_auto/v1723579957/amc-cdn/content/general/zh0dk96wv9xgy41ddi8p.jpg"
                    style="position: absolute; height: 100%; width: 100%; inset: 0px; color: transparent;">
                <div class="absolute inset-0 bg-hero-gradient"></div>
                <div class="mx-auto w-full max-w-[1248px] px-4 xl:px-0 relative">
                    <div class="grid gap-2 md:w-[var(--desktop-content-width)] md:pb-10 md:mr-auto"
                        style="--desktop-content-width: 75%;">
                        <header>
                            <h2 class="text-balance text-950 headline">Nhận voucher ưu đãi</h2>
                        </header>
                        <div class="rich-text text-500 copy">
                            <p
                                class="mb-4 flex-wrap items-center gap-4 [&amp;:has([data-rt-component=&quot;button&quot;])]:flex">
                                <span class="">Get in on the great savings waiting for you at participating AMC,
                                    AMC-DINE-IN</span><span class=""><sup class="">TM</sup></span><span
                                    class="">&nbsp;and AMC CLASSIC</span><span class=""><sup
                                        class="">TM</sup></span><span class="">&nbsp;theatres. Find out more about our
                                    discount movie tickets for matinee showtimes, Discount Tuesdays, and more!</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </section>




    <div class="empty:hidden">
        <!-- Loading indicator -->
        <div *ngIf="loading" class="flex justify-center items-center py-10">
            <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-500"></div>
            <span class="ml-3 text-lg">Đang tải danh sách voucher...</span>
        </div>

        <!-- Error message -->
        <div *ngIf="error"
            class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative my-4 mx-auto max-w-[1248px]">
            <strong class="font-bold">Lỗi!</strong>
            <span class="block sm:inline">{{ error }}</span>
        </div>

        <div class="group grid" *ngIf="!loading && !error">
            <section class="relative md:h-[var(--desktop-height)] voucher-section" style="--desktop-height: 585px;"
                *ngFor="let voucher of vouchers; let i = index" class="mb-0">
                <div class="h-full bg-cover bg-center md:bg-scroll">
                    <div class="mx-auto max-w-[1248px] px-4 xl:px-0 relative grid w-full flex-row items-center md:flex md:h-full"
                        [ngClass]="{'flex-row-reverse': i % 2 !== 0}" data-reversable="true">
                        <div
                            class="grid aspect-[7/5] w-full place-items-center md:flex-1 md:basis-[calc(var(--desktop-height)_*_1.4_-_4rem)]">
                            <div class="relative mx-auto mt-4 aspect-[7/5] w-full"><img alt="" config="[object Object]"
                                    loading="lazy" decoding="async" data-nimg="fill" class="object-contain"
                                    sizes="(max-width: 764px) 100vw, 50vw" srcset="{{ voucher.imageUrl }}"
                                    src="{{ voucher.imageUrl }}"
                                    style="position: absolute; height: 100%; width: 100%; inset: 0px; color: transparent;">
                            </div>
                        </div>
                        <div
                            class="grid h-full content-center gap-4 py-4 md:min-w-[350px] md:flex-1 md:basis-[calc(100%_-_(var(--desktop-height)_*_1.4_-_4rem))] md:pl-8 md:pr-12">
                            <header>
                                <h3 class="text-balance headline text-700">{{ voucher.title }}
                                </h3>
                            </header>
                            <div class="rich-text text-400">
                                <p
                                    class="mb-4 flex-wrap items-center gap-4 [&amp;:has([data-rt-component=&quot;button&quot;])]:flex">
                                    <span class="">{{ voucher.content }}</span>
                                </p>
                                <p>
                                    <span class="text-small text-200" style="color: grey !important">
                                        Ngày hết hạn: {{ voucher.endTime }}
                                    </span>
                                </p>
                            </div>
                            <div class="flex flex-wrap items-center gap-4" [ngClass]="{'justify-start': i % 2 !== 0}"
                                data-promo-cta-group="true">
                                <button
                                    class="btn inline-flex text-center items-center justify-center w-max font-bold transition duration-200 disabled:opacity-40 rounded-full text-white px-6 min-w-[10ch] text-sm md:text-base h-12"
                                    [ngClass]="{'bg-red-500 hocus:bg-red-400': voucher.claimedCount < voucher.maxClaimCount, 'bg-gray-400 cursor-not-allowed': voucher.claimedCount >= voucher.maxClaimCount}"
                                    (click)="claimVoucher(voucher)" id="660488f35cdd0ffc72fb5fe6" target="_self"
                                    [disabled]="voucher.claimedCount >= voucher.maxClaimCount"
                                    data-gtm-link-position="1">
                                    {{ voucher.claimedCount >= voucher.maxClaimCount ? 'Hết voucher' : 'Nhận Voucher' }}
                                </button>
                            </div>
                            <p>
                                <span class="text-small text-200" style="color: grey !important">
                                    Số người đã nhận: {{ voucher.claimedCount }} / {{ voucher.maxClaimCount }}
                                    <span *ngIf="voucher.claimedCount < voucher.maxClaimCount"
                                        class="text-green-500 ml-2">
                                        (Còn lại: {{ voucher.maxClaimCount - voucher.claimedCount }})
                                    </span>
                                    <span *ngIf="voucher.claimedCount >= voucher.maxClaimCount"
                                        class="text-red-500 ml-2">
                                        (Hết voucher)
                                    </span>
                                </span>
                            </p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>



    <div class="empty:hidden">
        <section class="mx-auto max-w-[1248px] px-2 py-8 empty:hidden sm:px-4 xl:px-0">
            <div class="rich-text">
                <p
                    class="mb-4 flex-wrap items-center gap-4 [&amp;:has([data-rt-component=&quot;button&quot;])]:flex text-center justify-center">
                    <a class="group transition-colors text-blue-500 hocus:text-white" target="_self"
                        href="https://www.amctheatres.com/offers?rel=offers_offer_discounts_promo"
                        data-gtm-link-position="6"><span class="font-bold">See More Offers &amp; Promotions</span></a>
                </p>
            </div>
        </section>
    </div>


</main>